# çŸ¥è¯†åº“ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŸºäºFastAPIå’ŒMilvusçš„é«˜æ€§èƒ½çŸ¥è¯†åº“ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒPDFã€CSVã€å›¾ç‰‡ç­‰å¤šç§æ–‡ä»¶æ ¼å¼çš„ä¸Šä¼ ã€å¤„ç†ã€å‘é‡åŒ–å’Œæ™ºèƒ½æ£€ç´¢ã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- âœ… **å¤šæ ¼å¼æ”¯æŒ**: PDFã€CSVã€å›¾ç‰‡ã€æ–‡æœ¬ç­‰
- âœ… **æ™ºèƒ½å‘é‡åŒ–**: åŸºäºSentence-Transformersçš„æ–‡æœ¬å‘é‡åŒ–
- âœ… **é«˜æ•ˆæ£€ç´¢**: åŸºäºMilvusçš„å‘é‡ç›¸ä¼¼åº¦æœç´¢
- âœ… **æ··åˆæœç´¢**: æ”¯æŒå‘é‡æœç´¢å’Œå…³é”®è¯æœç´¢èåˆ
- âœ… **å¼‚æ­¥å¤„ç†**: ä½¿ç”¨Celeryå¤„ç†é•¿æ—¶é—´æ“ä½œ
- âœ… **å®Œæ•´API**: RESTful APIè®¾è®¡ï¼Œæ”¯æŒSwaggeræ–‡æ¡£
- âœ… **å¯æ‰©å±•æ€§**: æ¨¡å—åŒ–æ¶æ„ï¼Œæ˜“äºæ‰©å±•
- âœ… **ç”Ÿäº§å°±ç»ª**: æ”¯æŒDockerã€Kuberneteséƒ¨ç½²

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- Python 3.9+
- Docker & Docker Compose
- PostgreSQL 12+
- Milvus 2.0+
- Redis 6.0+

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository_url>
cd knowledge-base-system
```

### 2. å¯åŠ¨ä¾èµ–æœåŠ¡

```bash
docker-compose up -d
```

### 3. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate  # Windows
```

### 4. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 5. åˆå§‹åŒ–æ•°æ®åº“

```bash
python scripts/init_db.py
python scripts/create_collection.py
```

### 6. å¯åŠ¨åº”ç”¨

```bash
uvicorn app.main:app --reload
```

### 7. è®¿é—®åº”ç”¨

- APIæ–‡æ¡£: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc
- å¥åº·æ£€æŸ¥: http://localhost:8000/api/v1/health

## ğŸ“ é¡¹ç›®ç»“æ„

```
knowledge-base-system/
â”œâ”€â”€ app/                          # åº”ç”¨ä¸»ç›®å½•
â”‚   â”œâ”€â”€ api/                      # APIè·¯ç”±å±‚
â”‚   â”œâ”€â”€ core/                     # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ models/                   # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/                 # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ middleware/               # ä¸­é—´ä»¶
â”œâ”€â”€ tests/                        # æµ‹è¯•ç›®å½•
â”œâ”€â”€ docs/                         # ä¸­æ–‡æ–‡æ¡£
â”œâ”€â”€ config/                       # é…ç½®æ–‡ä»¶
â”œâ”€â”€ scripts/                      # åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ uploads/                      # ä¸Šä¼ æ–‡ä»¶ç›®å½•
â”œâ”€â”€ logs/                         # æ—¥å¿—ç›®å½•
â”œâ”€â”€ requirements.txt              # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ docker-compose.yml            # Dockerç¼–æ’
â”œâ”€â”€ Dockerfile                    # Dockeré•œåƒ
â””â”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
```

## ğŸ“š æ–‡æ¡£

æ‰€æœ‰æ–‡æ¡£å‡ä¸ºä¸­æ–‡ï¼Œä½äº `docs/` ç›®å½•ï¼š

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [é¡¹ç›®æ¶æ„è®¾è®¡.md](docs/é¡¹ç›®æ¶æ„è®¾è®¡.md) | ç³»ç»Ÿæ¶æ„ã€æ¨¡å—è®¾è®¡ã€æ•°æ®æµ |
| [APIæ–‡æ¡£.md](docs/APIæ–‡æ¡£.md) | å®Œæ•´çš„APIæ¥å£æ–‡æ¡£ |
| [é…ç½®è¯´æ˜.md](docs/é…ç½®è¯´æ˜.md) | ç¯å¢ƒå˜é‡ã€é…ç½®æ–‡ä»¶è¯´æ˜ |
| [å¼€å‘æŒ‡å—.md](docs/å¼€å‘æŒ‡å—.md) | å¼€å‘æµç¨‹ã€ç¼–ç è§„èŒƒã€æµ‹è¯• |
| [æ–‡ä»¶å¤„ç†æµç¨‹.md](docs/æ–‡ä»¶å¤„ç†æµç¨‹.md) | æ–‡ä»¶å¤„ç†ã€å‘é‡åŒ–è¯¦ç»†æµç¨‹ |
| [æ•°æ®åº“è®¾è®¡.md](docs/æ•°æ®åº“è®¾è®¡.md) | PostgreSQLå’ŒMilvusè¡¨è®¾è®¡ |
| [éƒ¨ç½²æŒ‡å—.md](docs/éƒ¨ç½²æŒ‡å—.md) | Dockerã€K8sã€äº‘å¹³å°éƒ¨ç½² |

## ğŸ”§ ä¸»è¦APIæ¥å£

### æ–‡ä»¶ç®¡ç†

```bash
# ä¸Šä¼ æ–‡ä»¶
POST /api/v1/files/upload

# è·å–æ–‡ä»¶åˆ—è¡¨
GET /api/v1/files

# åˆ é™¤æ–‡ä»¶
DELETE /api/v1/files/{file_id}
```

### æœç´¢

```bash
# å‘é‡æœç´¢
POST /api/v1/search

# æ··åˆæœç´¢
POST /api/v1/search/hybrid
```

### çŸ¥è¯†åº“ç®¡ç†

```bash
# åˆ›å»ºçŸ¥è¯†åº“
POST /api/v1/knowledge-bases

# è·å–çŸ¥è¯†åº“åˆ—è¡¨
GET /api/v1/knowledge-bases

# è·å–çŸ¥è¯†åº“è¯¦æƒ…
GET /api/v1/knowledge-bases/{kb_id}
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ |
|------|------|
| åç«¯æ¡†æ¶ | FastAPI |
| å‘é‡æ•°æ®åº“ | Milvus |
| å…³ç³»æ•°æ®åº“ | PostgreSQL |
| ORM | SQLAlchemy |
| å¼‚æ­¥ä»»åŠ¡ | Celery |
| ç¼“å­˜ | Redis |
| æ–‡æœ¬å‘é‡åŒ– | Sentence-Transformers |
| æ–‡ä»¶å¤„ç† | PyPDF2, pandas, Tesseract |
| æµ‹è¯•æ¡†æ¶ | pytest |
| å®¹å™¨åŒ– | Docker |

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å®¢æˆ·ç«¯ (Web/Mobile)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         FastAPI åº”ç”¨å±‚                   â”‚
â”‚  Files | Documents | Search | KB API    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ä¸šåŠ¡æœåŠ¡å±‚                       â”‚
â”‚  File | Document | KB | Search Service  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         æ ¸å¿ƒä¸šåŠ¡å±‚                       â”‚
â”‚  File Processor | Vectorization | Searchâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            â”‚                â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”    â”Œâ”€â”€â”€â–¼â”€â”€â”        â”Œâ”€â”€â”€â–¼â”€â”€â”
    â”‚Milvusâ”‚    â”‚PostgreSQLâ”‚    â”‚Redis â”‚
    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œå•å…ƒæµ‹è¯•
pytest tests/unit/

# è¿è¡Œé›†æˆæµ‹è¯•
pytest tests/integration/

# æ˜¾ç¤ºè¦†ç›–ç‡
pytest --cov=app tests/
```

## ğŸ³ Dockeréƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t knowledge-base-system:latest .

# ä½¿ç”¨Docker Composeå¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f app

# åœæ­¢æœåŠ¡
docker-compose down
```

## â˜¸ï¸ Kuberneteséƒ¨ç½²

```bash
# åˆ›å»ºå‘½åç©ºé—´
kubectl create namespace knowledge-base

# éƒ¨ç½²åº”ç”¨
kubectl apply -f deployment.yaml

# æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
kubectl get pods -n knowledge-base
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- **æ–‡ä»¶ä¸Šä¼ **: æ”¯æŒ100MBä»¥å†…æ–‡ä»¶
- **å‘é‡æœç´¢**: <100ms (Top-10)
- **å¹¶å‘å¤„ç†**: æ”¯æŒ1000+å¹¶å‘è¯·æ±‚
- **å­˜å‚¨å®¹é‡**: æ”¯æŒç™¾ä¸‡çº§æ–‡æ¡£

## ğŸ” å®‰å…¨ç‰¹æ€§

- JWTè®¤è¯
- é€Ÿç‡é™åˆ¶
- è¾“å…¥éªŒè¯
- SQLæ³¨å…¥é˜²æŠ¤
- CORSé…ç½®
- æ—¥å¿—å®¡è®¡

## ğŸ“ å¼€å‘æµç¨‹

1. **åˆ›å»ºåˆ†æ”¯**: `git checkout -b feature/xxx`
2. **å¼€å‘åŠŸèƒ½**: ç¼–å†™ä»£ç å’Œæµ‹è¯•
3. **æäº¤ä»£ç **: `git commit -m "feat: xxx"`
4. **æ¨é€åˆ†æ”¯**: `git push origin feature/xxx`
5. **åˆ›å»ºPR**: æäº¤Pull Requestè¿›è¡Œå®¡æŸ¥

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µ: [GitHub](https://github.com/xxx/knowledge-base-system)
- é—®é¢˜åé¦ˆ: [Issues](https://github.com/xxx/knowledge-base-system/issues)
- è®¨è®ºåŒº: [Discussions](https://github.com/xxx/knowledge-base-system/discussions)

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®çš„æ”¯æŒï¼š

- [FastAPI](https://fastapi.tiangolo.com/)
- [Milvus](https://milvus.io/)
- [SQLAlchemy](https://www.sqlalchemy.org/)
- [Sentence-Transformers](https://www.sbert.net/)

## ğŸ“š ç›¸å…³èµ„æº

- [FastAPIå®˜æ–¹æ–‡æ¡£](https://fastapi.tiangolo.com/)
- [Milvuså®˜æ–¹æ–‡æ¡£](https://milvus.io/docs)
- [PostgreSQLå®˜æ–¹æ–‡æ¡£](https://www.postgresql.org/docs/)
- [Dockerå®˜æ–¹æ–‡æ¡£](https://docs.docker.com/)

---

**æœ€åæ›´æ–°**: 2024å¹´1æœˆ
**ç‰ˆæœ¬**: 1.0.0

