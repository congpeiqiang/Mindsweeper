# 🚀 知识库管理系统 - 开始使用

欢迎使用知识库管理系统！这是一个完整的、生产就绪的项目设计。

## 📋 你将获得什么

✅ **完整的项目架构设计**  
✅ **详细的中文文档** (7份)  
✅ **生产就绪的配置**  
✅ **完整的API设计** (20+端点)  
✅ **详细的数据库设计**  
✅ **自动化初始化脚本**  

## 🎯 5分钟快速开始

### 第1步：环境准备

```bash
# 克隆项目
git clone <repository_url>
cd Mindsweeper

# 创建虚拟环境
python -m venv venv
source venv/bin/activate  # Linux/Mac
# 或
venv\Scripts\activate  # Windows

# 安装依赖
pip install -r requirements.txt
```

### 第2步：配置环境

```bash
# 复制环境变量示例文件
cp .env.example .env

# 编辑 .env 文件（可选，使用默认值也可以）
# 主要配置项：
# - DATABASE_URL: PostgreSQL连接字符串
# - MILVUS_HOST: Milvus服务器地址
# - REDIS_URL: Redis连接字符串
```

### 第3步：启动依赖服务

```bash
# 使用Docker Compose启动所有依赖服务
docker-compose up -d

# 验证服务状态
docker-compose ps
```

### 第4步：初始化数据库

```bash
# 初始化PostgreSQL数据库
python scripts/init_db.py

# 创建Milvus集合
python scripts/create_collection.py
```

### 第5步：启动应用

```bash
# 开发模式（自动重载）
uvicorn app.main:app --reload

# 或生产模式
gunicorn -w 4 -k uvicorn.workers.UvicornWorker app.main:app
```

### 第6步：访问应用

- 📖 API文档: http://localhost:8000/docs
- ✅ 健康检查: http://localhost:8000/api/v1/health
- 📊 ReDoc文档: http://localhost:8000/redoc

## 📚 文档导航

### 🔰 新手必读
1. **[项目初始化指南](项目初始化指南.md)** - 快速开始和项目概览
2. **[项目架构设计](docs/项目架构设计.md)** - 系统架构和模块设计

### 👨‍💻 开发人员
1. **[开发指南](docs/开发指南.md)** - 开发流程和编码规范
2. **[API文档](docs/API文档.md)** - 完整的API接口文档
3. **[文件处理流程](docs/文件处理流程.md)** - 文件处理详细流程

### 🗄️ 数据库
1. **[数据库设计](docs/数据库设计.md)** - PostgreSQL和Milvus设计

### ⚙️ 配置和部署
1. **[配置说明](docs/配置说明.md)** - 环境变量和配置文件
2. **[部署指南](docs/部署指南.md)** - Docker、K8s、云平台部署

### 📋 项目信息
1. **[项目完成报告](项目完成报告.md)** - 项目成果总结
2. **[项目文件清单](项目文件清单.md)** - 所有文件的详细说明

## 🏗️ 项目结构

```
knowledge-base-system/
├── app/                    # 应用主目录
│   ├── api/               # API路由
│   ├── core/              # 核心业务逻辑
│   ├── models/            # 数据模型
│   ├── services/          # 业务服务
│   ├── utils/             # 工具函数
│   └── middleware/        # 中间件
├── tests/                 # 测试目录
├── docs/                  # 中文文档
├── config/                # 配置文件
├── scripts/               # 初始化脚本
├── uploads/               # 上传文件
├── logs/                  # 日志文件
├── .env.example           # 环境变量示例
├── requirements.txt       # 依赖列表
├── docker-compose.yml     # Docker编排
├── Dockerfile             # Docker镜像
└── README.md              # 项目说明
```

## 🛠️ 核心功能

### 📁 文件管理
- 支持PDF、CSV、图片、文本等多种格式
- 文件上传、删除、列表查询
- 文件状态跟踪

### 🔄 内容处理
- 自动提取文件内容
- 文本清洗和预处理
- 智能文本分块

### 🧠 向量化
- 支持多种嵌入模型
- 批量向量化处理
- 向量缓存优化

### 🔍 智能检索
- 向量相似度搜索
- 混合搜索（向量+关键词）
- 结果排序和重排

### 📚 知识库管理
- 创建和管理多个知识库
- 知识库统计信息
- 权限管理

## 🔧 技术栈

| 组件 | 技术 |
|------|------|
| 后端框架 | FastAPI |
| 向量数据库 | Milvus |
| 关系数据库 | PostgreSQL |
| ORM | SQLAlchemy |
| 异步任务 | Celery |
| 缓存 | Redis |
| 文本向量化 | Sentence-Transformers |
| 文件处理 | PyPDF2, pandas, Tesseract |
| 测试框架 | pytest |
| 容器化 | Docker |

## 📊 API概览

### 文件管理
```
POST   /api/v1/files/upload          # 上传文件
GET    /api/v1/files                 # 获取文件列表
GET    /api/v1/files/{file_id}       # 获取文件详情
DELETE /api/v1/files/{file_id}       # 删除文件
```

### 搜索
```
POST   /api/v1/search                # 向量搜索
POST   /api/v1/search/hybrid         # 混合搜索
```

### 知识库
```
POST   /api/v1/knowledge-bases       # 创建知识库
GET    /api/v1/knowledge-bases       # 获取知识库列表
GET    /api/v1/knowledge-bases/{id}  # 获取知识库详情
PUT    /api/v1/knowledge-bases/{id}  # 更新知识库
DELETE /api/v1/knowledge-bases/{id}  # 删除知识库
```

## 🐳 Docker命令

```bash
# 启动所有服务
docker-compose up -d

# 查看服务状态
docker-compose ps

# 查看日志
docker-compose logs -f app

# 停止服务
docker-compose down

# 重启服务
docker-compose restart
```

## 🧪 测试

```bash
# 运行所有测试
pytest

# 运行单元测试
pytest tests/unit/

# 运行集成测试
pytest tests/integration/

# 显示覆盖率
pytest --cov=app tests/
```

## 📈 性能指标

- **文件上传**: 支持100MB以内文件
- **向量搜索**: <100ms (Top-10)
- **并发处理**: 支持1000+并发请求
- **存储容量**: 支持百万级文档

## ❓ 常见问题

### Q: 如何修改嵌入模型？
A: 在 `.env` 文件中修改 `EMBEDDING_MODEL` 配置项

### Q: 如何添加新的文件处理器？
A: 参考 `docs/开发指南.md` 中的"添加新的文件处理器"部分

### Q: 如何部署到生产环境？
A: 参考 `docs/部署指南.md` 中的部署方案

### Q: 如何扩展搜索功能？
A: 参考 `docs/开发指南.md` 中的"添加新的搜索策略"部分

### Q: 如何监控系统性能？
A: 参考 `docs/部署指南.md` 中的监控部分

## 🚀 下一步

### 第一步：理解架构
阅读 `docs/项目架构设计.md` 了解系统设计

### 第二步：创建项目
运行 `python create_project_structure.py` 创建项目目录

### 第三步：启动服务
运行 `docker-compose up -d` 启动所有依赖服务

### 第四步：开始开发
参考 `docs/开发指南.md` 开始编码

### 第五步：部署上线
参考 `docs/部署指南.md` 部署到生产环境

## 📞 获取帮助

- 📖 查看文档: 所有文档都在 `docs/` 目录
- 🐛 报告问题: 提交 GitHub Issue
- 💬 讨论功能: 使用 GitHub Discussions
- 📧 联系我们: support@example.com

## 📄 许可证

MIT License - 详见LICENSE文件

## 🎉 开始使用

现在你已经准备好了！选择一个文档开始阅读：

1. **快速开始**: [项目初始化指南](项目初始化指南.md)
2. **系统设计**: [项目架构设计](docs/项目架构设计.md)
3. **开发指南**: [开发指南](docs/开发指南.md)
4. **API文档**: [API文档](docs/API文档.md)
5. **部署指南**: [部署指南](docs/部署指南.md)

---

**祝你使用愉快！** 🚀

如有任何问题，请参考相关文档或提交Issue。

