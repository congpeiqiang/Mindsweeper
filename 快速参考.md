# Mindsweeper å¿«é€Ÿå‚è€ƒå¡

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹

### 1. åˆ›å»ºé¡¹ç›®ç»“æ„ âœ… (å·²å®Œæˆ)
```bash
python create_project_structure.py
```

### 2. é…ç½®ç¯å¢ƒ
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶é…ç½®å‚æ•°
```

### 3. å¯åŠ¨ä¾èµ–æœåŠ¡
```bash
docker-compose up -d
```

### 4. åˆå§‹åŒ–æ•°æ®åº“
```bash
python scripts/init_db.py
python scripts/create_collection.py
```

### 5. å¯åŠ¨åº”ç”¨
```bash
uvicorn app.main:app --reload
```

### 6. è®¿é—®åº”ç”¨
- ğŸ“– APIæ–‡æ¡£: http://localhost:8000/docs
- âœ… å¥åº·æ£€æŸ¥: http://localhost:8000/api/v1/health

## ğŸ“ é¡¹ç›®ç»“æ„é€Ÿè§ˆ

```
app/
â”œâ”€â”€ api/v1/              # APIç«¯ç‚¹
â”œâ”€â”€ core/                # æ ¸å¿ƒä¸šåŠ¡
â”‚   â”œâ”€â”€ file_processor/  # æ–‡ä»¶å¤„ç†
â”‚   â”œâ”€â”€ vectorization/   # å‘é‡åŒ–
â”‚   â”œâ”€â”€ milvus_manager/  # Milvusç®¡ç†
â”‚   â””â”€â”€ search_engine/   # æœç´¢å¼•æ“
â”œâ”€â”€ services/            # ä¸šåŠ¡æœåŠ¡
â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â””â”€â”€ middleware/          # ä¸­é—´ä»¶

tests/                   # æµ‹è¯•ä»£ç 
config/                  # é…ç½®æ–‡ä»¶
scripts/                 # è„šæœ¬æ–‡ä»¶
docs/                    # æ–‡æ¡£
```

## ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µ

### APIå±‚ (app/api/v1/)
å¤„ç†HTTPè¯·æ±‚ï¼Œå®šä¹‰APIç«¯ç‚¹

**ä¸»è¦ç«¯ç‚¹**:
- `POST /files/upload` - ä¸Šä¼ æ–‡ä»¶
- `GET /files` - è·å–æ–‡ä»¶åˆ—è¡¨
- `POST /search` - æœç´¢
- `POST /knowledge-bases` - åˆ›å»ºçŸ¥è¯†åº“

### æœåŠ¡å±‚ (app/services/)
å®ç°ä¸šåŠ¡é€»è¾‘ï¼Œåè°ƒå„ä¸ªæ¨¡å—

**ä¸»è¦æœåŠ¡**:
- FileService - æ–‡ä»¶å¤„ç†
- DocumentService - æ–‡æ¡£ç®¡ç†
- SearchService - æœç´¢åŠŸèƒ½
- KnowledgeBaseService - çŸ¥è¯†åº“ç®¡ç†

### æ ¸å¿ƒå±‚ (app/core/)
å®ç°æ ¸å¿ƒç®—æ³•å’Œä¸šåŠ¡é€»è¾‘

**ä¸»è¦æ¨¡å—**:
- file_processor - æ–‡ä»¶å¤„ç†å™¨
- vectorization - å‘é‡åŒ–å¤„ç†
- milvus_manager - Milvusæ“ä½œ
- search_engine - æœç´¢å¼•æ“

### æ¨¡å‹å±‚ (app/models/)
å®šä¹‰æ•°æ®ç»“æ„

**ä¸»è¦æ–‡ä»¶**:
- schemas.py - Pydanticæ¨¡å‹
- database.py - SQLAlchemyæ¨¡å‹
- enums.py - æšä¸¾ç±»å‹

## ğŸ“Š å¸¸ç”¨å‘½ä»¤

### å¼€å‘å‘½ä»¤
```bash
# å¯åŠ¨åº”ç”¨ (å¼€å‘æ¨¡å¼)
uvicorn app.main:app --reload

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œå•å…ƒæµ‹è¯•
pytest tests/unit/

# è¿è¡Œé›†æˆæµ‹è¯•
pytest tests/integration/

# æ˜¾ç¤ºæµ‹è¯•è¦†ç›–ç‡
pytest --cov=app tests/
```

### Dockerå‘½ä»¤
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f app

# åœæ­¢æœåŠ¡
docker-compose down

# é‡å¯æœåŠ¡
docker-compose restart
```

### æ•°æ®åº“å‘½ä»¤
```bash
# åˆå§‹åŒ–PostgreSQL
python scripts/init_db.py

# åˆ›å»ºMilvusé›†åˆ
python scripts/create_collection.py

# æ•°æ®è¿ç§»
python scripts/migrate.py

# å¡«å……æµ‹è¯•æ•°æ®
python scripts/seed_data.py
```

## ğŸ”„ å·¥ä½œæµç¨‹

### æ–‡ä»¶ä¸Šä¼ æµç¨‹
```
1. ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶
   â†“
2. APIéªŒè¯æ–‡ä»¶
   â†“
3. æ–‡ä»¶å¤„ç†å™¨æå–å†…å®¹
   â†“
4. æ–‡æœ¬æ¸…æ´—å’Œåˆ†å—
   â†“
5. å‘é‡åŒ–å¤„ç†
   â†“
6. å­˜å‚¨åˆ°Milvus
   â†“
7. ä¿å­˜å…ƒæ•°æ®åˆ°PostgreSQL
   â†“
8. è¿”å›æˆåŠŸå“åº”
```

### æœç´¢æµç¨‹
```
1. ç”¨æˆ·è¾“å…¥æŸ¥è¯¢
   â†“
2. æŸ¥è¯¢å¤„ç†å’Œé¢„å¤„ç†
   â†“
3. å‘é‡åŒ–æŸ¥è¯¢
   â†“
4. Milvuså‘é‡æœç´¢
   â†“
5. ç»“æœæ’åºå’Œé‡æ’
   â†“
6. è¿”å›æœç´¢ç»“æœ
```

## ğŸ“ å¸¸è§ä»»åŠ¡

### æ·»åŠ æ–°çš„APIç«¯ç‚¹

1. åœ¨ `app/api/v1/` ä¸­åˆ›å»ºæˆ–ç¼–è¾‘æ–‡ä»¶
2. å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°
3. åœ¨ `app/models/schemas.py` ä¸­å®šä¹‰æ•°æ®æ¨¡å‹
4. åœ¨ `app/services/` ä¸­å®ç°ä¸šåŠ¡é€»è¾‘

### æ·»åŠ æ–°çš„æ–‡ä»¶å¤„ç†å™¨

1. åœ¨ `app/core/file_processor/` ä¸­åˆ›å»ºæ–°æ–‡ä»¶
2. ç»§æ‰¿ `base.py` ä¸­çš„ `BaseProcessor`
3. å®ç° `process()` æ–¹æ³•
4. åœ¨ `file_service.py` ä¸­æ³¨å†Œ

### æ·»åŠ æ–°çš„æœç´¢ç­–ç•¥

1. åœ¨ `app/core/search_engine/` ä¸­å®ç°
2. åœ¨ `search_service.py` ä¸­é›†æˆ
3. åœ¨ `app/api/v1/search.py` ä¸­æš´éœ²API

### ç¼–å†™æµ‹è¯•

1. å•å…ƒæµ‹è¯•: `tests/unit/test_*.py`
2. é›†æˆæµ‹è¯•: `tests/integration/test_*.py`
3. è¿è¡Œ: `pytest`

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡ (.env)

**åº”ç”¨é…ç½®**:
```
APP_NAME=Mindsweeper
APP_VERSION=1.0.0
DEBUG=True
```

**æ•°æ®åº“é…ç½®**:
```
DATABASE_URL=postgresql://user:password@localhost/mindsweeper
MILVUS_HOST=localhost
MILVUS_PORT=19530
REDIS_URL=redis://localhost:6379
```

**å‘é‡åŒ–é…ç½®**:
```
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384
```

**æ–‡ä»¶é…ç½®**:
```
MAX_FILE_SIZE=104857600  # 100MB
UPLOAD_DIR=uploads
```

### é…ç½®æ–‡ä»¶

- `config/settings.py` - åº”ç”¨è®¾ç½®
- `config/logging.yaml` - æ—¥å¿—é…ç½®
- `config/milvus.yaml` - Milvusé…ç½®

## ğŸ“š æ–‡æ¡£å¯¼èˆª

| æ–‡æ¡£ | å†…å®¹ |
|------|------|
| [å¼€å§‹ä½¿ç”¨.md](å¼€å§‹ä½¿ç”¨.md) | å¿«é€Ÿå¼€å§‹æŒ‡å— |
| [é¡¹ç›®ç»“æ„è¯´æ˜.md](é¡¹ç›®ç»“æ„è¯´æ˜.md) | è¯¦ç»†çš„ç›®å½•ç»“æ„ |
| [é¡¹ç›®ç»“æ„æ€»ç»“.md](é¡¹ç›®ç»“æ„æ€»ç»“.md) | é¡¹ç›®ç»“æ„æ€»ç»“ |
| [docs/é¡¹ç›®æ¶æ„è®¾è®¡.md](docs/é¡¹ç›®æ¶æ„è®¾è®¡.md) | ç³»ç»Ÿæ¶æ„ |
| [docs/å¼€å‘æŒ‡å—.md](docs/å¼€å‘æŒ‡å—.md) | å¼€å‘æŒ‡å— |
| [docs/APIæ–‡æ¡£.md](docs/APIæ–‡æ¡£.md) | APIæ¥å£ |
| [docs/é…ç½®è¯´æ˜.md](docs/é…ç½®è¯´æ˜.md) | é…ç½®è¯´æ˜ |
| [docs/æ•°æ®åº“è®¾è®¡.md](docs/æ•°æ®åº“è®¾è®¡.md) | æ•°æ®åº“è®¾è®¡ |
| [docs/æ–‡ä»¶å¤„ç†æµç¨‹.md](docs/æ–‡ä»¶å¤„ç†æµç¨‹.md) | å¤„ç†æµç¨‹ |
| [docs/éƒ¨ç½²æŒ‡å—.md](docs/éƒ¨ç½²æŒ‡å—.md) | éƒ¨ç½²æŒ‡å— |

## ğŸ› å¸¸è§é—®é¢˜

### Q: å¦‚ä½•ä¿®æ”¹åµŒå…¥æ¨¡å‹ï¼Ÿ
A: åœ¨ `.env` ä¸­ä¿®æ”¹ `EMBEDDING_MODEL` é…ç½®é¡¹

### Q: å¦‚ä½•æ·»åŠ æ–°çš„æ–‡ä»¶æ ¼å¼æ”¯æŒï¼Ÿ
A: åœ¨ `app/core/file_processor/` ä¸­åˆ›å»ºæ–°å¤„ç†å™¨

### Q: å¦‚ä½•æ‰©å±•æœç´¢åŠŸèƒ½ï¼Ÿ
A: åœ¨ `app/core/search_engine/` ä¸­å®ç°æ–°ç­–ç•¥

### Q: å¦‚ä½•éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Ÿ
A: å‚è€ƒ `docs/éƒ¨ç½²æŒ‡å—.md`

### Q: å¦‚ä½•ç›‘æ§ç³»ç»Ÿæ€§èƒ½ï¼Ÿ
A: å‚è€ƒ `docs/éƒ¨ç½²æŒ‡å—.md` ä¸­çš„ç›‘æ§éƒ¨åˆ†

## ğŸ¯ å¼€å‘æµç¨‹

### 1. ç†è§£æ¶æ„
é˜…è¯» `docs/é¡¹ç›®æ¶æ„è®¾è®¡.md`

### 2. è®¾ç½®å¼€å‘ç¯å¢ƒ
```bash
cp .env.example .env
pip install -r requirements.txt
docker-compose up -d
```

### 3. åˆå§‹åŒ–æ•°æ®åº“
```bash
python scripts/init_db.py
python scripts/create_collection.py
```

### 4. å¼€å§‹å¼€å‘
å‚è€ƒ `docs/å¼€å‘æŒ‡å—.md`

### 5. ç¼–å†™æµ‹è¯•
å‚è€ƒ `docs/å¼€å‘æŒ‡å—.md` ä¸­çš„æµ‹è¯•éƒ¨åˆ†

### 6. æäº¤ä»£ç 
éµå¾ªç¼–ç è§„èŒƒï¼Œè¿è¡Œæµ‹è¯•

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°é‡ |
|------|------|
| ç›®å½•æ•° | 20+ |
| Pythonæ–‡ä»¶ | 60+ |
| é…ç½®æ–‡ä»¶ | 3 |
| è„šæœ¬æ–‡ä»¶ | 4 |
| æµ‹è¯•æ–‡ä»¶ | 7 |
| æ–‡æ¡£æ–‡ä»¶ | 10+ |
| APIç«¯ç‚¹ | 20+ |
| æ•°æ®åº“è¡¨ | 6 |

## ğŸš€ æ€§èƒ½æŒ‡æ ‡

- æ–‡ä»¶ä¸Šä¼ : æ”¯æŒ100MBä»¥å†…
- å‘é‡æœç´¢: <100ms (Top-10)
- å¹¶å‘å¤„ç†: 1000+
- å­˜å‚¨å®¹é‡: ç™¾ä¸‡çº§æ–‡æ¡£

## ğŸ“ è·å–å¸®åŠ©

- ğŸ“– æŸ¥çœ‹æ–‡æ¡£: `docs/` ç›®å½•
- ğŸ› æŠ¥å‘Šé—®é¢˜: GitHub Issues
- ğŸ’¬ è®¨è®ºåŠŸèƒ½: GitHub Discussions
- ğŸ“§ è”ç³»æˆ‘ä»¬: support@example.com

## âœ… æ£€æŸ¥æ¸…å•

- [ ] é¡¹ç›®ç»“æ„å·²åˆ›å»º
- [ ] ç¯å¢ƒå˜é‡å·²é…ç½®
- [ ] ä¾èµ–å·²å®‰è£…
- [ ] DockeræœåŠ¡å·²å¯åŠ¨
- [ ] æ•°æ®åº“å·²åˆå§‹åŒ–
- [ ] åº”ç”¨å·²å¯åŠ¨
- [ ] æµ‹è¯•å·²é€šè¿‡
- [ ] æ–‡æ¡£å·²é˜…è¯»

---

**é¡¹ç›®åç§°**: Mindsweeper  
**é¡¹ç›®ç±»å‹**: çŸ¥è¯†åº“ç®¡ç†ç³»ç»Ÿ  
**æ¡†æ¶**: FastAPI + Milvus + PostgreSQL  
**ç‰ˆæœ¬**: 1.0.0  
**çŠ¶æ€**: âœ… é¡¹ç›®ç»“æ„å·²åˆ›å»º

